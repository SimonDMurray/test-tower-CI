name: Test Nextflow Tower

on:
  workflow_dispatch:

jobs:

  run-pipeline:  
    name: Test Nextflow Tower 
    
    runs-on: self-hosted
    container:
      image: nextflow:23.06.0-edge

    steps:     
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Run Pipeline
        run : nextflow run $GITHUB_WORKSPACE/main.nf -with-tower ${{ secrets.TOWER_TOKEN }}
